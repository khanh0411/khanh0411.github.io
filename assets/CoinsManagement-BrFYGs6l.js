import{_ as O,r as b,U as B,ck as E,j as c,o as F,c as T,a as t,k as u,l as g,b as S,D as V,u as h,V as A,F as N,E as p,e as j,ci as $,x as P,C as z,s as G}from"./index-DX20sgB1.js";import{u as Q}from"./studentCourse.store-BYD53-Bv.js";import{u as H,i as J,a as K}from"./auth.store-EST28Lue.js";import{U as W,u as X}from"./user.store-D0r_ospw.js";const Y={__name:"AddUserForm",emits:["submit"],setup(L,{emit:w}){const y=w,i=H(),f=b(!1),d={full_name:"",dob:"",email:"",password:"",role:"",status:""},v={full_name:"",dob:"",email:"",password:"",role:"",status:""},l=b({...v}),r=b({...d}),U=Object.keys(B).map(n=>({value:B[n].toString(),label:n.charAt(0)+n.slice(1).toLowerCase()})),C=Object.keys(E).map(n=>({value:E[n].toString(),label:n.charAt(0)+n.slice(1).toLowerCase()}));async function k(){let n=!0;if(r.value={...d},l.value.full_name.trim()===""&&(r.value.full_name="This field is required",n=!1),l.value.dob.trim()===""&&(r.value.dob="This field is required",n=!1),l.value.email.trim()===""?(r.value.email="This field is required",n=!1):J(l.value.email.trim())||(r.value.email="This field is not in email format",n=!1),l.value.password.trim()===""?(r.value.password="This field is required",n=!1):K(l.value.password.trim())||(r.value.password="Passwords need to be 8 characters or more and have a combination of uppercase letters, lowercase letters, numbers and symbols.",n=!1),l.value.role.trim()===""&&(r.value.role="This field is required",n=!1),l.value.status.trim()===""&&(r.value.status="This field is required",n=!1),n){f.value=!0;const e=await i.handleCreateUser(l.value);f.value=!1,e.errors?p({text:e.errors,type:"error"}):(y("submit"),p({text:" Create successfully",type:"success"}),l.value={...v})}}return(n,e)=>{const s=c("GenericInput"),m=c("SmallComponent"),x=c("GenericSelect"),a=c("FullScreenLoading");return F(),T(N,null,[t("form",{onSubmit:A(k,["prevent"]),class:"space-y-4"},[t("div",null,[e[6]||(e[6]=t("label",{for:"fullName",class:"block text-sm font-medium text-gray-700"},"Full Name",-1)),u(s,{id:"fullName",modelValue:l.value.full_name,"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.full_name=o),type:"text",placeholder:"Enter full name",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 invalid:border-red-500",error:!!r.value.full_name},null,8,["modelValue","error"]),u(m,null,{default:g(()=>[S(V(r.value.full_name),1)]),_:1})]),t("div",null,[e[7]||(e[7]=t("label",{for:"dob",class:"block text-sm font-medium text-gray-700"},"Date of Birth",-1)),u(s,{id:"dob",modelValue:l.value.dob,"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.dob=o),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",error:!!r.value.dob},null,8,["modelValue","error"]),u(m,null,{default:g(()=>[S(V(r.value.dob),1)]),_:1})]),t("div",null,[e[8]||(e[8]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),u(s,{id:"email",modelValue:l.value.email,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.email=o),type:"email",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Enter email address",error:!!r.value.email},null,8,["modelValue","error"]),u(m,null,{default:g(()=>[S(V(r.value.email),1)]),_:1})]),t("div",null,[e[9]||(e[9]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),u(s,{id:"password",modelValue:l.value.password,"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.password=o),type:"password",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Enter password",error:!!r.value.password},null,8,["modelValue","error"]),u(m,null,{default:g(()=>[S(V(r.value.password),1)]),_:1})]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Role",-1)),u(x,{options:h(U),placeholder:"Select role",modelValue:l.value.role,"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.role=o),error:!!r.value.role},null,8,["options","modelValue","error"]),u(m,null,{default:g(()=>[S(V(r.value.role),1)]),_:1})]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),u(x,{options:h(C),placeholder:"Select status",modelValue:l.value.status,"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.status=o),error:!!r.value.status},null,8,["options","modelValue","error"]),u(m,null,{default:g(()=>[S(V(r.value.status),1)]),_:1})]),e[12]||(e[12]=t("div",{class:"flex justify-end"},[t("button",{type:"submit",class:"btn btn-blue"},"Save")],-1))],32),u(a,{open:f.value},null,8,["open"])],64)}}},Z=O(Y,[["__scopeId","data-v-c70af8d9"]]),ee={__name:"EditUserForm",props:{user:{type:W,required:!0}},emits:["submit"],setup(L,{emit:w}){const y=w,i=L,f=X(),d=b(!1),v={full_name:"",dob:"",email:"",password:"",role:"",status:""},l=b({...v}),r=Object.keys(B).map(e=>({value:B[e].toString(),label:e.charAt(0)+e.slice(1).toLowerCase()})),U=Object.keys(E).map(e=>({value:E[e].toString(),label:e.charAt(0)+e.slice(1).toLowerCase()}));function C(e){const s=e.toUpperCase();return B[s]||null}function k(e){const s=e.toUpperCase();return E[s]||null}async function n(){d.value=!0;const e=await f.handleUpdateUser(i.user.user_id,Number(l.value.role),Number(l.value.status));d.value=!1,e.errors?p({text:e.errors,type:"error"}):(y("submit"),p({text:" Changed successfully",type:"success"}),l.value={...v})}return j(()=>{l.value={...v,...i.user,role:C(i.user.role),status:k(i.user.status)}}),(e,s)=>{const m=c("GenericInput"),x=c("GenericSelect"),a=c("FullScreenLoading");return F(),T(N,null,[t("form",{onSubmit:A(n,["prevent"]),class:"space-y-4"},[t("div",null,[s[5]||(s[5]=t("label",{for:"fullName",class:"block text-sm font-medium text-gray-700"},"Full Name",-1)),u(m,{id:"fullName",modelValue:l.value.full_name,"onUpdate:modelValue":s[0]||(s[0]=o=>l.value.full_name=o),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Enter full name",disabled:!0},null,8,["modelValue"])]),t("div",null,[s[6]||(s[6]=t("label",{for:"dob",class:"block text-sm font-medium text-gray-700"},"Date of Birth",-1)),u(m,{id:"dob",modelValue:l.value.dob,"onUpdate:modelValue":s[1]||(s[1]=o=>l.value.dob=o),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:!0},null,8,["modelValue"])]),t("div",null,[s[7]||(s[7]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),u(m,{id:"email",modelValue:l.value.email,"onUpdate:modelValue":s[2]||(s[2]=o=>l.value.email=o),type:"email",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Enter email address",disabled:!0},null,8,["modelValue"])]),t("div",null,[s[8]||(s[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Role",-1)),u(x,{options:h(r),placeholder:"Select role",modelValue:l.value.role,"onUpdate:modelValue":s[3]||(s[3]=o=>l.value.role=o)},null,8,["options","modelValue"])]),t("div",null,[s[9]||(s[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),u(x,{options:h(U),placeholder:"Select status",modelValue:l.value.status,"onUpdate:modelValue":s[4]||(s[4]=o=>l.value.status=o)},null,8,["options","modelValue"])]),s[10]||(s[10]=t("div",{class:"flex justify-end"},[t("button",{type:"submit",class:"btn btn-blue"},"Save")],-1))],32),u(a,{open:d.value},null,8,["open"])],64)}}},le=O(ee,[["__scopeId","data-v-ca46318c"]]),te={class:"flex items-center justify-between flex-wrap gap-3.5 mb-3 mx-5"},oe={class:"flex items-center justify-between flex-wrap gap-3.5"},se={class:"relative w-[250px]"},ie={__name:"CoinsManagement",setup(L){const w=Q(),y=b(!1),i=b(!1),f=b(null),d=b(""),v=b({searchQuery:d.value}),l=b(new $({cols:[{title:"ID",key:"mapped_id",i18n:"",width:"10%",sortable:!0},{title:"Người yêu cầu",key:"full_name",i18n:"",width:"18%",sortable:!0},{title:"Ngày",key:"date",i18n:"",width:"18%",sortable:!1},{title:"Loại",key:"type2",i18n:"",width:"18%",sortable:!1},{title:"Trạng thái",key:"statuscoins",i18n:"",width:"18%",sortable:!1},{title:"Số Coin",key:"coins",i18n:"",width:"18%",sortable:!1}],rows:[],uniqueField:"mapped_id",isShowActionIconOnly:!0,showMoreButton:!1,editButton:!1,deleteButton:!0,height:800,pagination:{page:1,totals:5}}));async function r(){i.value=!0;const a=await w.handleGetRechargeHistory();i.value=!1,a.errors?p({text:a.errors,type:"error"}):(console.log(a.purchase_history),l.value.rows=a.purchase_history)}async function U(a){console.log(a);const o={purchase_id:a.id,status:a.statuscoins};i.value=!0;const _=await w.handleUpdateRechargeStatus(o);i.value=!1,_.errors?p({text:_.errors,type:"error"}):_.data.message==="Purchase status updated successfully"?p({text:`Đã nạp cho ${a.full_name} ${a.coins} coins`,type:"success"}):p({text:`Đã hủy yêu cầu từ ${a.full_name} `,type:"warn"})}async function C(){i.value=!0;const a=await w.handleGetBuyCourseHistory();i.value=!1,a.errors?p({text:a.errors,type:"error"}):console.log(a)}function k(){v.value.searchQuery=d.value}function n(){d.value="",v.value.searchQuery="",r()}function e(){y.value=!1,f.value=null}function s(a){y.value=!0,f.value=a}async function m(){i.value=!0;const a="";i.value=!1,a.errors?p({text:a.errors,type:"error"}):(p({text:"Delete successfully",type:"success"}),y.value=!1,n())}function x(){e()}return j(async()=>{r(),C()}),(a,o)=>{const _=c("GenericTable"),I=c("GenericDialog"),R=c("AdminLayout"),q=c("ConfirmDialog"),M=c("FullScreenLoading");return F(),T(N,null,[u(R,null,{default:g(()=>[t("form",te,[t("div",oe,[t("div",se,[P(t("input",{"onUpdate:modelValue":o[0]||(o[0]=D=>d.value=D),type:"text",class:"w-full h-10 pl-4 pr-12 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-[#669ee9] focus:border-[#669ee9]",placeholder:"Search",onInput:k},null,544),[[z,d.value]]),o[3]||(o[3]=t("span",{class:"absolute right-0 top-0 h-full px-3 flex items-center text-[#669ee9] border-l border-gray-200"},[t("i",{class:"bi bi-search"})],-1))])]),t("div",{class:"flex items-center justify-between gap-3.5"},[t("button",{onClick:n,type:"button",class:"flex items-center justify-center w-[47px] h-10 text-[#669ee9] bg-white border border-gray-200 rounded hover:bg-[#669ee9] hover:text-white transition-colors duration-150"},o[4]||(o[4]=[t("i",{class:"bi bi-arrow-repeat"},null,-1)]))])]),u(_,{configs:l.value,filters:v.value,isEditing:!0,"rows-per-page":10,onDelete:s,onSelect:U},null,8,["configs","filters"]),u(I,{modelValue:a.isOpenCreateUserDialog,"onUpdate:modelValue":o[1]||(o[1]=D=>a.isOpenCreateUserDialog=D),size:"3xl",title:f.value?"Update User  ":"Create User",onClose:e},{default:g(()=>[f.value?(F(),G(h(le),{key:0,user:f.value,onSubmit:a.handleSubmitSuccess},null,8,["user","onSubmit"])):(F(),G(h(Z),{key:1,onSubmit:a.handleSubmitSuccess},null,8,["onSubmit"]))]),_:1},8,["modelValue","title"])]),_:1}),u(q,{modelValue:y.value,"onUpdate:modelValue":o[2]||(o[2]=D=>y.value=D),onAccept:m,onDeny:x},null,8,["modelValue"]),u(M,{open:i.value},null,8,["open"])],64)}}};export{ie as default};

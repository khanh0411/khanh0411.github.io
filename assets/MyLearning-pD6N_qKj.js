import{r as t,w as P,i as g,e as S,s as y,l as T,E as I,o as m,a as l,x as $,C as B,c as F,q as V,u as D,F as N,D as C,k as j,A}from"./index-Cq1q5qQY.js";import{M as E,I as O}from"./MyCouresView-CzFa-dWX.js";import{u as q}from"./course.store-NRaWg-ku.js";const G={class:"my-4 w-full flex justify-center items-center"},Q={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},U={class:"mt-6 flex justify-center items-center space-x-2"},z=["disabled"],H={class:"px-4"},J=["disabled"],Y={__name:"MyLearning",setup(K){const _=q(),p=t([]),r=t(!1),o=t(""),s=t(1),i=t(8),u=t(null),c=t(null);async function x(){r.value=!0;const e=await _.handleGetAll2Course();r.value=!1,e.errors?I({text:e.errors,type:"error"}):p.value=e.data.StudentCourses}function M(){c.value&&clearTimeout(c.value),c.value=setTimeout(()=>{s.value=1},500)}P(o,M);const f=g(()=>p.value.filter(e=>e.name.toLowerCase().includes(o.value.toLowerCase()))),b=g(()=>{const e=(s.value-1)*i.value,n=e+i.value;return f.value.slice(e,n)}),d=g(()=>Math.ceil(f.value.length/i.value));function h(e){e>=1&&e<=d.value&&(s.value=e)}function w(e){u.value=u.value===e?null:e}function k(){u.value=null}return S(()=>{x()}),(e,n)=>(m(),y(E,null,{default:T(()=>[l("div",G,[$(l("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>o.value=a),type:"text",class:"w-full max-w-3xl p-4 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",placeholder:"Search courses by name..."},null,512),[[B,o.value]])]),l("div",Q,[(m(!0),F(N,null,V(b.value,(a,v)=>(m(),y(D(O),{onClick:L=>e.$router.push(`/learning-page?id=${a.course_id}`),key:a.course_id,menuIndex:v,isMenuOpen:u.value===v,image:a.image,name:a.name,author:a.author,onToggleMenu:L=>w(v),onCloseMenu:k},null,8,["onClick","menuIndex","isMenuOpen","image","name","author","onToggleMenu"]))),128))]),l("div",U,[l("button",{onClick:n[1]||(n[1]=a=>h(s.value-1)),disabled:s.value===1,class:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50"}," Previous ",8,z),l("span",H,"Page "+C(s.value)+" of "+C(d.value),1),l("button",{onClick:n[2]||(n[2]=a=>h(s.value+1)),disabled:s.value===d.value,class:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50"}," Next ",8,J)]),j(A,{open:r.value},null,8,["open"])]),_:1}))}};export{Y as default};

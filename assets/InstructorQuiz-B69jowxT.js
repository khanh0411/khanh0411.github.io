import{_ as J,r as u,i as q,e as K,s as P,l as W,E as c,j as h,o as n,a as e,k as d,T as G,D as m,c as i,b as D,z as g,F as Y,q as Z}from"./index-D8gAyzM3.js";import{u as ee}from"./question.store-Q3RbuUJ_.js";const te={class:"max-w-6xl mx-auto p-6"},le={class:"mb-6"},se={class:"flex justify-between items-center"},ae={class:"relative w-64"},oe={class:"mb-6"},ne={class:"flex justify-between items-center"},ie={class:"flex space-x-2"},ue=["disabled"],re={key:0,class:"bg-white rounded-lg shadow-lg p-6"},de={class:"flex justify-between items-center mb-6"},ce={class:"relative w-64"},me={key:0,class:"py-8 text-center"},be={key:1,class:"py-8 text-center"},ve={key:2,class:"overflow-x-auto"},pe={class:"min-w-full"},xe={class:"bg-white divide-y divide-gray-200"},fe={class:"px-6 py-4"},ye={class:"px-6 py-4"},ge={class:"px-6 py-4"},he={class:"px-6 py-4"},ke={class:"px-6 py-4"},_e={class:"px-6 py-4"},we={class:"flex space-x-2"},Ce=["onClick","disabled"],Ve=["onClick","disabled"],Qe={key:1,class:"bg-white rounded-lg shadow-lg p-6"},De={class:"text-2xl font-semibold mb-6"},Se={class:"space-y-6"},Te={class:"relative w-64"},Ee={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ue={class:"flex space-x-4"},Ie=["disabled"],Be={key:0,class:"flex items-center justify-center"},qe={key:1},Ge=["disabled"],je={key:0,class:"flex items-center justify-center"},Le={key:1},$e=["disabled"],ze={__name:"InstructorQuiz",setup(Ae){const f=ee(),r=u("list"),b=u(null),S=u([]),T=u([]),v=u(!1),k=u(null),_=u(""),a=u(!1),w=u([]),y=u(!1),C=u(null),o=u({name:"",duration:"",easeQuestion:"",mediumQuestion:"",hardQuestion:"",section_id:""}),E=q(()=>Array.isArray(w.value)?w.value.filter(l=>l.name.toLowerCase().includes(_.value.toLowerCase())):[]),U=q(()=>o.value.name.trim()!==""&&o.value.section_id.trim()!==""&&o.value.duration>0&&o.value.easeQuestion>=0&&o.value.mediumQuestion>=0&&o.value.hardQuestion>=0);function V(l){a.value||(r.value=l),r.value==="list"&&(b.value="",p())}function j(l){y.value=!0,C.value=l}async function L(){a.value=!0;const l=await f.handleDeleteExam(C.value._id);a.value=!1,l.errors?c({text:l.errors,type:"error"}):(c({text:"Delete Success",type:"success"}),y.value=!1,p())}function $(){y.value=!1,C.value=null}function Q(){o.value={name:"",duration:"",easeQuestion:"",mediumQuestion:"",hardQuestion:"",section_id:""},v.value=!1,k.value=null,r.value="list"}function z(l){v.value=!0,k.value=l._id,o.value={...l},r.value="form"}async function A(){a.value=!0;const l=await f.handleUpdateExam({...o.value,test_id:k.value});a.value=!1,l.errors?c({text:l.errors,type:"error"}):(c({text:"Update Success",type:"success"}),Q(),p())}async function F(){a.value=!0,console.log(o.value);const l=await f.handleCreateExam(b.value,o.value);a.value=!1,l.errors?c({text:l.errors,type:"error"}):(c({text:"Create Success",type:"success"}),Q(),p())}async function N(){const l=await f.handleGetCourseById();l.errors?c({text:l.errors,type:"error"}):S.value=l}function H(l){T.value=l.sections,b.value=l.value,r.value==="list"&&p()}function M(l){o.value.section_id=l.value}async function p(){a.value=!0;const l=await f.handleGetExam(b.value);a.value=!1,l.errors?c({text:"errors",type:"error"}):w.value=l.data}return K(()=>{N(),p()}),(l,t)=>{const I=h("GenericSelect"),x=h("GenericInput"),O=h("ConfirmDialog"),R=h("InstructorLayout");return n(),P(R,null,{default:W(()=>{var B;return[e("div",te,[e("div",le,[e("div",se,[e("div",ae,[t[12]||(t[12]=e("label",{for:"course",class:"block text-sm font-medium text-gray-700 mb-1"},"Chọn khóa học",-1)),d(I,{id:"course",modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),onChange:H,options:S.value,class:"w-full border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:a.value},null,8,["modelValue","options","disabled"])])])]),e("div",oe,[e("div",ne,[e("div",ie,[e("button",{onClick:t[1]||(t[1]=s=>V("list")),class:G(["px-4 py-2 rounded-lg transition-colors",r.value==="list"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Danh sách bài kiểm tra ",2),e("button",{onClick:t[2]||(t[2]=s=>V("form")),class:G(["px-4 py-2 rounded-lg transition-colors",r.value==="form"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},m(v.value?"Chỉnh sửa bài kiểm tra":"Thêm bài kiểm tra mới"),3)]),r.value==="list"?(n(),i("button",{key:0,onClick:t[3]||(t[3]=s=>V("form")),class:"flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",disabled:a.value},t[13]||(t[13]=[e("i",{class:"bi bi-plus text-lg mr-2"},null,-1),D(" Thêm bài kiểm tra ")]),8,ue)):g("",!0)])]),r.value==="list"?(n(),i("div",re,[e("div",de,[t[15]||(t[15]=e("h2",{class:"text-2xl font-semibold"},"Danh sách bài kiểm tra",-1)),e("div",ce,[t[14]||(t[14]=e("i",{class:"bi bi-search absolute left-3 top-2.5 text-gray-500"},null,-1)),d(x,{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=s=>_.value=s),type:"text",placeholder:"Tìm kiếm bài kiểm tra...",class:"w-full pl-10 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"])])]),a.value?(n(),i("div",me,t[16]||(t[16]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Đang tải...",-1)]))):(B=E.value)!=null&&B.length?(n(),i("div",ve,[e("table",pe,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tên bài kiểm tra "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thời gian (phút) "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số câu dễ "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số câu TB "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số câu khó "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])],-1)),e("tbody",xe,[(n(!0),i(Y,null,Z(E.value,s=>(n(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",fe,m(s.name),1),e("td",ye,m(s.duration),1),e("td",ge,m(s.easeQuestion),1),e("td",he,m(s.mediumQuestion),1),e("td",ke,m(s.hardQuestion),1),e("td",_e,[e("div",we,[e("button",{onClick:X=>z(s),class:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",disabled:a.value},t[18]||(t[18]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,Ce),e("button",{onClick:X=>j(s),class:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",disabled:a.value},t[19]||(t[19]=[e("i",{class:"bi bi-trash"},null,-1)]),8,Ve)])])]))),128))])])])):(n(),i("div",be,t[17]||(t[17]=[e("i",{class:"bi bi-inbox text-4xl text-gray-400"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Vui lòng chọn khóa học",-1)])))])):g("",!0),r.value==="form"?(n(),i("div",Qe,[e("h2",De,m(v.value?"Chỉnh sửa bài kiểm tra":"Thêm bài kiểm tra mới"),1),e("div",Se,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tên bài kiểm tra",-1)),d(x,{modelValue:o.value.name,"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.name=s),type:"text",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])]),e("div",Te,[t[22]||(t[22]=e("label",{for:"section",class:"block text-sm font-medium text-gray-700 mb-1"},"Chọn Section",-1)),d(I,{id:"section",modelValue:o.value.section_id,"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.section_id=s),onChange:M,options:T.value,class:"w-full border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:a.value},null,8,["modelValue","options","disabled"])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Thời gian (phút)",-1)),d(x,{modelValue:o.value.duration,"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.duration=s),type:"number",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])]),e("div",Ee,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Số câu dễ",-1)),d(x,{modelValue:o.value.easeQuestion,"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.easeQuestion=s),type:"number",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Số câu trung bình",-1)),d(x,{modelValue:o.value.mediumQuestion,"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.mediumQuestion=s),type:"number",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Số câu khó",-1)),d(x,{modelValue:o.value.hardQuestion,"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.hardQuestion=s),type:"number",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])])]),e("div",Ue,[v.value?g("",!0):(n(),i("button",{key:0,onClick:F,type:"submit",class:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",disabled:a.value||!U.value},[a.value?(n(),i("span",Be,t[27]||(t[27]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1),D(" Đang xử lý... ")]))):(n(),i("span",qe,"Tạo bài kiểm tra"))],8,Ie)),v.value?(n(),i("button",{key:1,onClick:A,type:"submit",class:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",disabled:a.value||!U.value},[a.value?(n(),i("span",je,t[28]||(t[28]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1),D(" Đang xử lý... ")]))):(n(),i("span",Le,"Cập nhật"))],8,Ge)):g("",!0),e("button",{type:"button",onClick:Q,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:a.value}," Hủy ",8,$e)])])])):g("",!0),d(O,{modelValue:y.value,"onUpdate:modelValue":t[11]||(t[11]=s=>y.value=s),onAccept:L,onDeny:$,title:"Xác nhận xóa",message:"Bạn có chắc chắn muốn xóa bài kiểm tra này không?"},null,8,["modelValue"])])]}),_:1})}}},He=J(ze,[["__scopeId","data-v-835aeb61"]]);export{He as default};

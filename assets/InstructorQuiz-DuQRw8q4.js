import{_ as O,r as u,i as U,e as X,s as J,l as K,E as d,j as h,o as n,a as e,k as c,R as B,D as m,c as i,b as D,z as g,F as P,q as W}from"./index-elA_cgIn.js";import{u as Y}from"./question.store-DiuQd71T.js";const Z={class:"max-w-6xl mx-auto p-6"},ee={class:"mb-6"},te={class:"flex justify-between items-center"},se={class:"relative w-64"},le={class:"mb-6"},ae={class:"flex justify-between items-center"},oe={class:"flex space-x-2"},ne=["disabled"],ie={key:0,class:"bg-white rounded-lg shadow-lg p-6"},ue={class:"flex justify-between items-center mb-6"},re={class:"relative w-64"},de={key:0,class:"py-8 text-center"},ce={key:1,class:"py-8 text-center"},me={key:2,class:"overflow-x-auto"},be={class:"min-w-full"},pe={class:"bg-white divide-y divide-gray-200"},ve={class:"px-6 py-4"},xe={class:"px-6 py-4"},ye={class:"px-6 py-4"},fe={class:"px-6 py-4"},ge={class:"px-6 py-4"},he={class:"px-6 py-4"},ke={class:"px-6 py-4"},_e={class:"flex space-x-2"},we=["onClick","disabled"],Ce=["onClick","disabled"],Ve={key:1,class:"bg-white rounded-lg shadow-lg p-6"},Qe={class:"text-2xl font-semibold mb-6"},De={class:"space-y-6"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Te={class:"flex space-x-4"},Ee=["disabled"],Ie={key:0,class:"flex items-center justify-center"},Ue={key:1},Be=["disabled"],qe={key:0,class:"flex items-center justify-center"},Ge={key:1},je=["disabled"],Le={__name:"InstructorQuiz",setup($e){const y=Y(),r=u("list"),b=u(null),S=u([]),p=u(!1),k=u(null),_=u(""),a=u(!1),w=u([]),f=u(!1),C=u(null),o=u({name:"",duration:"",easeQuestion:"",mediumQuestion:"",hardQuestion:""}),T=U(()=>Array.isArray(w.value)?w.value.filter(l=>l.name.toLowerCase().includes(_.value.toLowerCase())):[]),E=U(()=>o.value.name.trim()!==""&&o.value.duration>0&&o.value.easeQuestion>=0&&o.value.mediumQuestion>=0&&o.value.hardQuestion>=0);function V(l){a.value||(r.value=l),r.value==="list"&&(b.value="",v())}function q(l){f.value=!0,C.value=l}async function G(){a.value=!0;const l=await y.handleDeleteExam(C.value._id);a.value=!1,l.errors?d({text:l.errors,type:"error"}):(d({text:"Delete Success",type:"success"}),f.value=!1,v())}function j(){f.value=!1,C.value=null}function Q(){o.value={name:"",duration:"",easeQuestion:"",mediumQuestion:"",hardQuestion:""},p.value=!1,k.value=null,r.value="list"}function L(l){p.value=!0,k.value=l._id,o.value={...l},r.value="form"}async function $(){a.value=!0;const l=await y.handleUpdateExam({...o.value,test_id:k.value});a.value=!1,l.errors?d({text:l.errors,type:"error"}):(d({text:"Update Success",type:"success"}),Q(),v())}async function z(){a.value=!0,console.log(o.value);const l=await y.handleCreateExam(b.value,o.value);a.value=!1,l.errors?d({text:l.errors,type:"error"}):(d({text:"Create Success",type:"success"}),Q(),v())}async function A(){const l=await y.handleGetCourseById();l.errors?d({text:l.errors,type:"error"}):S.value=l}function F(l){b.value=l,r.value==="list"&&v()}async function v(){a.value=!0;const l=await y.handleGetExam(b.value);a.value=!1,l.errors?d({text:"errors",type:"error"}):w.value=l.data}return X(()=>{A(),v()}),(l,t)=>{const N=h("GenericSelect"),x=h("GenericInput"),R=h("ConfirmDialog"),H=h("InstructorLayout");return n(),J(H,null,{default:K(()=>{var I;return[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[t[11]||(t[11]=e("label",{for:"course",class:"block text-sm font-medium text-gray-700 mb-1"},"Chọn khóa học",-1)),c(N,{id:"course",modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),onChange:F,options:S.value,class:"w-full border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:a.value},null,8,["modelValue","options","disabled"])])])]),e("div",le,[e("div",ae,[e("div",oe,[e("button",{onClick:t[1]||(t[1]=s=>V("list")),class:B(["px-4 py-2 rounded-lg transition-colors",r.value==="list"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Danh sách bài kiểm tra ",2),e("button",{onClick:t[2]||(t[2]=s=>V("form")),class:B(["px-4 py-2 rounded-lg transition-colors",r.value==="form"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},m(p.value?"Chỉnh sửa bài kiểm tra":"Thêm bài kiểm tra mới"),3)]),r.value==="list"?(n(),i("button",{key:0,onClick:t[3]||(t[3]=s=>V("form")),class:"flex items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",disabled:a.value},t[12]||(t[12]=[e("i",{class:"bi bi-plus text-lg mr-2"},null,-1),D(" Thêm bài kiểm tra ")]),8,ne)):g("",!0)])]),r.value==="list"?(n(),i("div",ie,[e("div",ue,[t[14]||(t[14]=e("h2",{class:"text-2xl font-semibold"},"Danh sách bài kiểm tra",-1)),e("div",re,[t[13]||(t[13]=e("i",{class:"bi bi-search absolute left-3 top-2.5 text-gray-500"},null,-1)),c(x,{modelValue:_.value,"onUpdate:modelValue":t[4]||(t[4]=s=>_.value=s),type:"text",placeholder:"Tìm kiếm bài kiểm tra...",class:"w-full pl-10 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"])])]),a.value?(n(),i("div",de,t[15]||(t[15]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-4 border-blue-500 border-t-transparent"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Đang tải...",-1)]))):(I=T.value)!=null&&I.length?(n(),i("div",me,[e("table",be,[t[19]||(t[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Tên bài kiểm tra "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Thời gian (phút) "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số câu dễ "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số câu TB "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Số câu khó "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Thao tác")])],-1)),e("tbody",pe,[(n(!0),i(P,null,W(T.value,s=>(n(),i("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ve,m(s._id),1),e("td",xe,m(s.name),1),e("td",ye,m(s.duration),1),e("td",fe,m(s.easeQuestion),1),e("td",ge,m(s.mediumQuestion),1),e("td",he,m(s.hardQuestion),1),e("td",ke,[e("div",_e,[e("button",{onClick:M=>L(s),class:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",disabled:a.value},t[17]||(t[17]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,we),e("button",{onClick:M=>q(s),class:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",disabled:a.value},t[18]||(t[18]=[e("i",{class:"bi bi-trash"},null,-1)]),8,Ce)])])]))),128))])])])):(n(),i("div",ce,t[16]||(t[16]=[e("i",{class:"bi bi-inbox text-4xl text-gray-400"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Chưa có bài kiểm tra nào",-1)])))])):g("",!0),r.value==="form"?(n(),i("div",Ve,[e("h2",Qe,m(p.value?"Chỉnh sửa bài kiểm tra":"Thêm bài kiểm tra mới"),1),e("div",De,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tên bài kiểm tra",-1)),c(x,{modelValue:o.value.name,"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.name=s),type:"text",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Thời gian (phút)",-1)),c(x,{modelValue:o.value.duration,"onUpdate:modelValue":t[6]||(t[6]=s=>o.value.duration=s),type:"number",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])]),e("div",Se,[e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Số câu dễ",-1)),c(x,{modelValue:o.value.easeQuestion,"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.easeQuestion=s),type:"number",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Số câu trung bình",-1)),c(x,{modelValue:o.value.mediumQuestion,"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.mediumQuestion=s),type:"number",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Số câu khó",-1)),c(x,{modelValue:o.value.hardQuestion,"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.hardQuestion=s),type:"number",class:"w-full",required:"",disabled:a.value},null,8,["modelValue","disabled"])])]),e("div",Te,[p.value?g("",!0):(n(),i("button",{key:0,onClick:z,type:"submit",class:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",disabled:a.value||!E.value},[a.value?(n(),i("span",Ie,t[25]||(t[25]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1),D(" Đang xử lý... ")]))):(n(),i("span",Ue,"Tạo bài kiểm tra"))],8,Ee)),p.value?(n(),i("button",{key:1,onClick:$,type:"submit",class:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",disabled:a.value||!E.value},[a.value?(n(),i("span",qe,t[26]||(t[26]=[e("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"},null,-1),D(" Đang xử lý... ")]))):(n(),i("span",Ge,"Cập nhật"))],8,Be)):g("",!0),e("button",{type:"button",onClick:Q,class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:a.value}," Hủy ",8,je)])])])):g("",!0),c(R,{modelValue:f.value,"onUpdate:modelValue":t[10]||(t[10]=s=>f.value=s),onAccept:G,onDeny:j,title:"Xác nhận xóa",message:"Bạn có chắc chắn muốn xóa bài kiểm tra này không?"},null,8,["modelValue"])])]}),_:1})}}},Fe=O(Le,[["__scopeId","data-v-a5a163b2"]]);export{Fe as default};

import{_ as k,bc as g,ch as x,r as i,s as B,l as d,B as E,S as f,j as u,o as R,a as o,k as t,Q as v,b,D as y,V as L,c3 as T,cf as F,cg as G}from"./index-DX20sgB1.js";import{u as K,a as N}from"./auth.store-EST28Lue.js";const j={class:"mx-7 text-sm font-medium"},q={class:"mt-5"},A={class:"mt-5"},D={__name:"ResetPasswordView",emits:["submit"],setup(I,{emit:_}){const C=_;g(()=>{const e=E().query.token;e&&x(f.accessToken,e,7)});const{notify:V}=G(),h=K(),m={password:"",passwordConfirmation:""},p={password:"",passwordConfirmation:""},s=i({...p}),a=i({...m}),n=i(!1);async function w(){let r=!0;if(a.value={...m},s.value.password.trim()===""?(a.value.password="This field is required",r=!1):N(s.value.password.trim())||(a.value.password="Passwords need to be 8 characters or more and have a combination of uppercase letters, lowercase letters, numbers and symbols.",r=!1),s.value.passwordConfirmation!==s.value.password&&(a.value.passwordConfirmation="Passwords don't match",r=!1),r){n.value=!0;const e=await h.handleResetPassWord(s.value.password);n.value=!1,e.errors?V({text:e.errors,type:"error"}):(C("submit"),s.value={...p},F(f.accessToken),window.location.replace("https://khanh0411.github.io/#/signin"))}}return(r,e)=>{const c=u("SmallComponent"),S=u("FullScreenLoading"),P=u("GuestLayout");return R(),B(P,null,{default:d(()=>[o("form",{class:"form rounded-lg overflow-hidden w-auto h-auto",onSubmit:L(w,["prevent"]),onKeyup:T(w,["enter"])},[e[5]||(e[5]=o("div",{class:"flex justify-center items-center"},[o("button",null,"Reset Password")],-1)),o("div",j,[o("div",q,[e[2]||(e[2]=o("label",null,"Password",-1)),t(v,{modelValue:s.value.password,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.password=l),type:"password",placeholder:"Enter your Password",class:"mt-3 invalid:border-red-500",error:!!a.value.password},null,8,["modelValue","error"]),t(c,null,{default:d(()=>[b(y(a.value.password),1)]),_:1})]),o("div",A,[e[3]||(e[3]=o("label",null,"Confirm Password",-1)),t(v,{modelValue:s.value.passwordConfirmation,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.passwordConfirmation=l),type:"password",placeholder:"Enter your Password",class:"mt-3 invalid:border-red-500",error:!!a.value.passwordConfirmation},null,8,["modelValue","error"]),t(c,null,{default:d(()=>[b(y(a.value.passwordConfirmation),1)]),_:1})]),e[4]||(e[4]=o("button",{class:"primary-button !w-full my-5"},"Create new password",-1))])],32),t(S,{open:n.value},null,8,["open"])]),_:1})}}},U=k(D,[["__scopeId","data-v-dce28e85"]]);export{U as default};

import{_ as k,be as x,cg as h,r as d,s as R,l as i,y as B,S as f,j as u,o as E,a as o,k as t,R as v,b,A as y,W as L,c5 as T,ce as F,m as G,cf as A}from"./index-Cww7t7_x.js";import{u as I,a as K}from"./auth.store-DqASw5e-.js";const N={class:"mx-7 text-sm font-medium"},j={class:"mt-5"},q={class:"mt-5"},M={__name:"ResetPasswordView",emits:["submit"],setup(O,{emit:_}){const C=_;x(()=>{const e=B().query.token;console.log(e),h(f.accessToken,e,7)});const{notify:V}=A(),S=I(),m={password:"",passwordConfirmation:""},p={password:"",passwordConfirmation:""},s=d({...p}),a=d({...m}),n=d(!1);async function w(){let r=!0;if(a.value={...m},s.value.password.trim()===""?(a.value.password="This field is required",r=!1):K(s.value.password.trim())||(a.value.password="Passwords need to be 8 characters or more and have a combination of uppercase letters, lowercase letters, numbers and symbols.",r=!1),s.value.passwordConfirmation!==s.value.password&&(a.value.passwordConfirmation="Passwords don't match",r=!1),r){n.value=!0;const e=await S.handleResetPassWord(s.value.password);n.value=!1,e.errors?V({text:e.errors,type:"error"}):(C("submit"),s.value={...p},F(f.accessToken),window.location.replace(G.signIn.path))}}return(r,e)=>{const c=u("SmallComponent"),P=u("FullScreenLoading"),g=u("GuestLayout");return E(),R(g,null,{default:i(()=>[o("form",{class:"form rounded-lg overflow-hidden w-auto h-auto",onSubmit:L(w,["prevent"]),onKeyup:T(w,["enter"])},[e[5]||(e[5]=o("div",{class:"flex justify-center items-center"},[o("button",null,"Reset Password")],-1)),o("div",N,[o("div",j,[e[2]||(e[2]=o("label",null,"Password",-1)),t(v,{modelValue:s.value.password,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.password=l),type:"password",placeholder:"Enter your Password",class:"mt-3 invalid:border-red-500",error:!!a.value.password},null,8,["modelValue","error"]),t(c,null,{default:i(()=>[b(y(a.value.password),1)]),_:1})]),o("div",q,[e[3]||(e[3]=o("label",null,"Confirm Password",-1)),t(v,{modelValue:s.value.passwordConfirmation,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.passwordConfirmation=l),type:"password",placeholder:"Enter your Password",class:"mt-3 invalid:border-red-500",error:!!a.value.passwordConfirmation},null,8,["modelValue","error"]),t(c,null,{default:i(()=>[b(y(a.value.passwordConfirmation),1)]),_:1})]),e[4]||(e[4]=o("button",{class:"primary-button !w-full my-5"},"Create new password",-1))])],32),t(P,{open:n.value},null,8,["open"])]),_:1})}}},D=k(M,[["__scopeId","data-v-16aecb63"]]);export{D as default};

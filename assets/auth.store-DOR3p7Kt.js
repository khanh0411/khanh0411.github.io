import{y as i,r as p,z as a,cd as g,S as l,c9 as d}from"./index-Ct7bBCdm.js";import{A as n}from"./index-C_HyQ6wr.js";const f=i("auth",()=>{const t=p(null);async function c(o){var s;try{const e=await a.post("/api/auth/login",o);g(l.accessToken,e.data.token,7);const r=d(e.data.token);return t.value=r.user,console.log(t.value),{user:r.user}}catch(e){return e instanceof n?{errors:((s=e.response.data)==null?void 0:s.messages)||[]}:{errors:["Something wrong, please try later"]}}}async function u(o){var s;try{return await a.post("/api/auth/register",o)}catch(e){return e instanceof n?{errors:((s=e.response.data)==null?void 0:s.messages)||[]}:{errors:["Something wrong, please try later"]}}}return{user:t,handleLogin:c,handleCreateUser:u}});export{f as u};

import{_ as G,r as u,j as y,o as D,c as B,a as e,k as a,l as h,b as k,D as F,W as U,F as I,E as C,e as j,ce as W,x as H,C as J,s as A,u as T}from"./index-D9h54A27.js";import{u as L}from"./category.store-SwnPyqoy.js";class O{constructor(v,m,d,i){this.mapped_id=v,this.id=m,this.name=d||"",this.description=i||""}}const K={__name:"AddCategoryForm",emits:["submit"],setup(V,{emit:v}){const m=v,d=L(),i=u(!1),s={name:"",description:""},p={name:"",description:""},n=u({...p}),o=u({...s});async function c(){let b=!0;if(o.value={...s},n.value.name.trim()===""&&(o.value.name="This field is required",b=!1),n.value.description.trim()===""&&(o.value.description="This field is required",b=!1),b){i.value=!0;const t=await d.handleCreateCategory(n.value);i.value=!1,t.errors?C({text:t.errors,type:"error"}):(m("submit"),C({text:" Create successfully",type:"success"}),n.value={...p})}}return(b,t)=>{const l=y("GenericInput"),g=y("SmallComponent"),w=y("FullScreenLoading");return D(),B(I,null,[e("form",{onSubmit:U(c,["prevent"]),class:"space-y-4"},[e("div",null,[t[2]||(t[2]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name Category",-1)),a(l,{id:"name",modelValue:n.value.name,"onUpdate:modelValue":t[0]||(t[0]=x=>n.value.name=x),type:"text",placeholder:"Enter name category",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 invalid:border-red-500",error:!!o.value.name},null,8,["modelValue","error"]),a(g,null,{default:h(()=>[k(F(o.value.name),1)]),_:1})]),e("div",null,[t[3]||(t[3]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description Category",-1)),a(l,{id:"description",modelValue:n.value.description,"onUpdate:modelValue":t[1]||(t[1]=x=>n.value.description=x),type:"text",placeholder:"Enter description category",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",error:!!o.value.description},null,8,["modelValue","error"]),a(g,null,{default:h(()=>[k(F(o.value.description),1)]),_:1})]),t[4]||(t[4]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"btn btn-blue"},"Save")],-1))],32),a(w,{open:i.value},null,8,["open"])],64)}}},P=G(K,[["__scopeId","data-v-677635a3"]]),R={__name:"EditCategoryForm",props:{category:{type:O,required:!0}},emits:["submit"],setup(V,{emit:v}){const m=v,d=V,i=L(),s=u(!1),p={name:"",description:""},n={name:"",description:""},o=u({...n}),c=u({...p});async function b(){let t=!0;if(c.value={...p},o.value.name.trim()===""&&(c.value.name="This field is required",t=!1),o.value.description.trim()===""&&(c.value.description="This field is required",t=!1),t){s.value=!0;const l={category_id:d.category.id,name:o.value.name,description:o.value.description},g=await i.handleUpdateCategory(l);s.value=!1,g.errors?C({text:g.errors,type:"error"}):(m("submit"),C({text:" Changed successfully",type:"success"}),o.value={...n})}}return j(()=>{o.value={...n,...d.category}}),(t,l)=>{const g=y("GenericInput"),w=y("SmallComponent"),x=y("FullScreenLoading");return D(),B(I,null,[e("form",{onSubmit:U(b,["prevent"]),class:"space-y-4"},[e("div",null,[l[2]||(l[2]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name Category",-1)),a(g,{id:"name",modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=_=>o.value.name=_),type:"text",placeholder:"Enter name category",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 invalid:border-red-500",error:!!c.value.name},null,8,["modelValue","error"]),a(w,null,{default:h(()=>[k(F(c.value.name),1)]),_:1})]),e("div",null,[l[3]||(l[3]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description Category",-1)),a(g,{id:"description",modelValue:o.value.description,"onUpdate:modelValue":l[1]||(l[1]=_=>o.value.description=_),type:"text",placeholder:"Enter description category",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",error:!!c.value.description},null,8,["modelValue","error"]),a(w,null,{default:h(()=>[k(F(c.value.description),1)]),_:1})]),l[4]||(l[4]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"btn btn-blue"},"Save")],-1))],32),a(x,{open:s.value},null,8,["open"])],64)}}},X=G(R,[["__scopeId","data-v-d173d85d"]]),Y={class:"flex items-center justify-between flex-wrap gap-3.5 mb-3 mx-5"},Z={class:"flex items-center justify-between flex-wrap gap-3.5"},ee={class:"relative w-[250px]"},le={__name:"CategoryManagement",setup(V){const v=L(),m=u(!1),d=u(!1),i=u(!1),s=u(null),p=u(""),n=u({searchQuery:p.value}),o=u(new W({cols:[{title:"ID",key:"mapped_id",i18n:"",width:"10%",sortable:!0},{title:"Name",key:"name",i18n:"",width:"30%",sortable:!0},{title:"Description",key:"description",i18n:"",width:"60%",sortable:!1}],rows:[],uniqueField:"mapped_id",isShowActionIconOnly:!0,showMoreButton:!1,editButton:!0,deleteButton:!0,height:800,pagination:{page:1,totals:5}}));async function c(){i.value=!0;const f=await v.handleGetAllCategory();i.value=!1,f.errors?C({text:f.errors,type:"error"}):o.value.rows=f.data.map((r,E)=>new O(E+1,r._id,r.name,r.description))}function b(){n.value.searchQuery=p.value}function t(){p.value="",n.value.searchQuery="",c()}function l(){t(),m.value=!1}function g(){m.value=!0}function w(f){m.value=!0,s.value=f}function x(){d.value=!1,s.value=null}function _(f){d.value=!0,s.value=f}async function N(){i.value=!0;const f=await v.handleDeleteCategory(s.value.id);i.value=!1,f.errors?C({text:f.errors,type:"error"}):(C({text:"Delete successfully",type:"success"}),d.value=!1,t())}function q(){x()}return j(async()=>{c()}),(f,r)=>{const E=y("GenericTable"),M=y("GenericDialog"),Q=y("AdminLayout"),$=y("ConfirmDialog"),z=y("FullScreenLoading");return D(),B(I,null,[a(Q,null,{default:h(()=>[e("form",Y,[e("div",Z,[e("div",ee,[H(e("input",{"onUpdate:modelValue":r[0]||(r[0]=S=>p.value=S),type:"text",class:"w-full h-10 pl-4 pr-12 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-[#669ee9] focus:border-[#669ee9]",placeholder:"Search",onInput:b},null,544),[[J,p.value]]),r[3]||(r[3]=e("span",{class:"absolute right-0 top-0 h-full px-3 flex items-center text-[#669ee9] border-l border-gray-200"},[e("i",{class:"bi bi-search"})],-1))])]),e("div",{class:"flex items-center justify-between gap-3.5"},[e("button",{type:"button",class:"flex items-center justify-center w-[159px] h-10 text-[#669ee9] bg-white border border-gray-200 rounded hover:bg-[#669ee9] hover:text-white transition-colors duration-150",onClick:g},r[4]||(r[4]=[e("i",{class:"bi bi-plus-lg"},null,-1),e("span",{class:"ml-2.5"},"Add New",-1)])),e("button",{onClick:t,type:"button",class:"flex items-center justify-center w-[47px] h-10 text-[#669ee9] bg-white border border-gray-200 rounded hover:bg-[#669ee9] hover:text-white transition-colors duration-150"},r[5]||(r[5]=[e("i",{class:"bi bi-arrow-repeat"},null,-1)]))])]),a(E,{configs:o.value,filters:n.value,"rows-per-page":10,onEdit:w,onDelete:_},null,8,["configs","filters"]),a(M,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=S=>m.value=S),size:"3xl",title:s.value?"Update Category  ":"Create Category",onClose:x},{default:h(()=>[s.value?(D(),A(T(X),{key:0,category:s.value,onSubmit:l},null,8,["category"])):(D(),A(T(P),{key:1,onSubmit:l}))]),_:1},8,["modelValue","title"])]),_:1}),a($,{modelValue:d.value,"onUpdate:modelValue":r[2]||(r[2]=S=>d.value=S),onAccept:N,onDeny:q},null,8,["modelValue"]),a(z,{open:i.value},null,8,["open"])],64)}}};export{le as default};

import{_ as G,r as c,U as F,ck as B,j as p,o as O,c as T,a as t,k as a,l as y,b as h,D as k,u as D,V as j,F as L,E as V,e as I,ci as $,x as H,C as J,s as A}from"./index-MMv_fUx2.js";import{U as K,u as q}from"./user.store-CReCRwxd.js";import{u as W,i as X,a as Y}from"./auth.store-DtihrGQC.js";const Z={__name:"AddUserForm",emits:["submit"],setup(N,{emit:S}){const g=S,d=W(),b=c(!1),n={full_name:"",dob:"",email:"",password:"",role:"",status:""},m={full_name:"",dob:"",email:"",password:"",role:"",status:""},l=c({...m}),s=c({...n}),U=Object.keys(F).map(r=>({value:F[r].toString(),label:r.charAt(0)+r.slice(1).toLowerCase()})),_=Object.keys(B).map(r=>({value:B[r].toString(),label:r.charAt(0)+r.slice(1).toLowerCase()}));async function w(){let r=!0;if(s.value={...n},l.value.full_name.trim()===""&&(s.value.full_name="This field is required",r=!1),l.value.dob.trim()===""&&(s.value.dob="This field is required",r=!1),l.value.email.trim()===""?(s.value.email="This field is required",r=!1):X(l.value.email.trim())||(s.value.email="This field is not in email format",r=!1),l.value.password.trim()===""?(s.value.password="This field is required",r=!1):Y(l.value.password.trim())||(s.value.password="Passwords need to be 8 characters or more and have a combination of uppercase letters, lowercase letters, numbers and symbols.",r=!1),l.value.role.trim()===""&&(s.value.role="This field is required",r=!1),l.value.status.trim()===""&&(s.value.status="This field is required",r=!1),r){b.value=!0;const e=await d.handleCreateUser(l.value);b.value=!1,e.errors?V({text:e.errors,type:"error"}):(g("submit"),V({text:" Create successfully",type:"success"}),l.value={...m})}}return(r,e)=>{const o=p("GenericInput"),i=p("SmallComponent"),x=p("GenericSelect"),C=p("FullScreenLoading");return O(),T(L,null,[t("form",{onSubmit:j(w,["prevent"]),class:"space-y-4"},[t("div",null,[e[6]||(e[6]=t("label",{for:"fullName",class:"block text-sm font-medium text-gray-700"},"Full Name",-1)),a(o,{id:"fullName",modelValue:l.value.full_name,"onUpdate:modelValue":e[0]||(e[0]=u=>l.value.full_name=u),type:"text",placeholder:"Enter full name",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 invalid:border-red-500",error:!!s.value.full_name},null,8,["modelValue","error"]),a(i,null,{default:y(()=>[h(k(s.value.full_name),1)]),_:1})]),t("div",null,[e[7]||(e[7]=t("label",{for:"dob",class:"block text-sm font-medium text-gray-700"},"Date of Birth",-1)),a(o,{id:"dob",modelValue:l.value.dob,"onUpdate:modelValue":e[1]||(e[1]=u=>l.value.dob=u),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",error:!!s.value.dob},null,8,["modelValue","error"]),a(i,null,{default:y(()=>[h(k(s.value.dob),1)]),_:1})]),t("div",null,[e[8]||(e[8]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),a(o,{id:"email",modelValue:l.value.email,"onUpdate:modelValue":e[2]||(e[2]=u=>l.value.email=u),type:"email",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Enter email address",error:!!s.value.email},null,8,["modelValue","error"]),a(i,null,{default:y(()=>[h(k(s.value.email),1)]),_:1})]),t("div",null,[e[9]||(e[9]=t("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),a(o,{id:"password",modelValue:l.value.password,"onUpdate:modelValue":e[3]||(e[3]=u=>l.value.password=u),type:"password",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Enter password",error:!!s.value.password},null,8,["modelValue","error"]),a(i,null,{default:y(()=>[h(k(s.value.password),1)]),_:1})]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Role",-1)),a(x,{options:D(U),placeholder:"Select role",modelValue:l.value.role,"onUpdate:modelValue":e[4]||(e[4]=u=>l.value.role=u),error:!!s.value.role},null,8,["options","modelValue","error"]),a(i,null,{default:y(()=>[h(k(s.value.role),1)]),_:1})]),t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),a(x,{options:D(_),placeholder:"Select status",modelValue:l.value.status,"onUpdate:modelValue":e[5]||(e[5]=u=>l.value.status=u),error:!!s.value.status},null,8,["options","modelValue","error"]),a(i,null,{default:y(()=>[h(k(s.value.status),1)]),_:1})]),e[12]||(e[12]=t("div",{class:"flex justify-end"},[t("button",{type:"submit",class:"btn btn-blue"},"Save")],-1))],32),a(C,{open:b.value},null,8,["open"])],64)}}},ee=G(Z,[["__scopeId","data-v-27bae460"]]),le={__name:"EditUserForm",props:{user:{type:K,required:!0}},emits:["submit"],setup(N,{emit:S}){const g=S,d=N,b=q(),n=c(!1),m={full_name:"",dob:"",email:"",password:"",role:"",status:""},l=c({...m}),s=Object.keys(F).map(e=>({value:F[e].toString(),label:e.charAt(0)+e.slice(1).toLowerCase()})),U=Object.keys(B).map(e=>({value:B[e].toString(),label:e.charAt(0)+e.slice(1).toLowerCase()}));function _(e){const o=e.toUpperCase();return F[o]||null}function w(e){const o=e.toUpperCase();return B[o]||null}async function r(){n.value=!0;const e=await b.handleUpdateUser(d.user.user_id,Number(l.value.role),Number(l.value.status));n.value=!1,e.errors?V({text:e.errors,type:"error"}):(g("submit"),V({text:" Changed successfully",type:"success"}),l.value={...m})}return I(()=>{l.value={...m,...d.user,role:_(d.user.role),status:w(d.user.status)}}),(e,o)=>{const i=p("GenericInput"),x=p("GenericSelect"),C=p("FullScreenLoading");return O(),T(L,null,[t("form",{onSubmit:j(r,["prevent"]),class:"space-y-4"},[t("div",null,[o[5]||(o[5]=t("label",{for:"fullName",class:"block text-sm font-medium text-gray-700"},"Full Name",-1)),a(i,{id:"fullName",modelValue:l.value.full_name,"onUpdate:modelValue":o[0]||(o[0]=u=>l.value.full_name=u),type:"text",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Enter full name",disabled:!0},null,8,["modelValue"])]),t("div",null,[o[6]||(o[6]=t("label",{for:"dob",class:"block text-sm font-medium text-gray-700"},"Date of Birth",-1)),a(i,{id:"dob",modelValue:l.value.dob,"onUpdate:modelValue":o[1]||(o[1]=u=>l.value.dob=u),type:"date",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:!0},null,8,["modelValue"])]),t("div",null,[o[7]||(o[7]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),a(i,{id:"email",modelValue:l.value.email,"onUpdate:modelValue":o[2]||(o[2]=u=>l.value.email=u),type:"email",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",placeholder:"Enter email address",disabled:!0},null,8,["modelValue"])]),t("div",null,[o[8]||(o[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Role",-1)),a(x,{options:D(s),placeholder:"Select role",modelValue:l.value.role,"onUpdate:modelValue":o[3]||(o[3]=u=>l.value.role=u)},null,8,["options","modelValue"])]),t("div",null,[o[9]||(o[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),a(x,{options:D(U),placeholder:"Select status",modelValue:l.value.status,"onUpdate:modelValue":o[4]||(o[4]=u=>l.value.status=u)},null,8,["options","modelValue"])]),o[10]||(o[10]=t("div",{class:"flex justify-end"},[t("button",{type:"submit",class:"btn btn-blue"},"Save")],-1))],32),a(C,{open:n.value},null,8,["open"])],64)}}},te=G(le,[["__scopeId","data-v-7e49bc52"]]),oe={class:"flex items-center justify-between flex-wrap gap-3.5 mb-3 mx-5"},se={class:"flex items-center justify-between flex-wrap gap-3.5"},ae={class:"relative w-[250px]"},ie={__name:"UserManagement",setup(N){const S=q(),g=c(!1),d=c(!1),b=c(!1),n=c(null),m=c(""),l=c({searchQuery:m.value}),s=c(new $({cols:[{title:"ID",key:"mapped_id",i18n:"",width:"10%",sortable:!0},{title:"Name",key:"full_name",i18n:"",width:"18%",sortable:!0},{title:"DOB",key:"dob",i18n:"",width:"18%",sortable:!1},{title:"Email",key:"email",i18n:"",width:"18%",sortable:!1},{title:"Status",key:"status",i18n:"",width:"18%",sortable:!1},{title:"Role",key:"role",i18n:"",width:"18%",sortable:!1}],rows:[],uniqueField:"mapped_id",isShowActionIconOnly:!0,showMoreButton:!1,editButton:!0,deleteButton:!0,height:800,pagination:{page:1,totals:5}}));async function U(){b.value=!0;const v=await S.handleGetUsers();b.value=!1,v.errors?V({text:v.errors,type:"error"}):s.value.rows=v.data}function _(){l.value.searchQuery=m.value}function w(){m.value="",l.value.searchQuery="",U()}function r(){w(),g.value=!1}function e(){g.value=!0}function o(v){g.value=!0,n.value=v}function i(){d.value=!1,n.value=null}function x(v){d.value=!0,n.value=v}async function C(){b.value=!0;const v=await S.handleDeleteUser(n.value.user_id);b.value=!1,v.errors?V({text:v.errors,type:"error"}):(V({text:"Delete successfully",type:"success"}),d.value=!1,w())}function u(){i()}return I(async()=>{U()}),(v,f)=>{const R=p("GenericTable"),M=p("GenericDialog"),z=p("AdminLayout"),P=p("ConfirmDialog"),Q=p("FullScreenLoading");return O(),T(L,null,[a(z,null,{default:y(()=>[t("form",oe,[t("div",se,[t("div",ae,[H(t("input",{"onUpdate:modelValue":f[0]||(f[0]=E=>m.value=E),type:"text",class:"w-full h-10 pl-4 pr-12 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-[#669ee9] focus:border-[#669ee9]",placeholder:"Search",onInput:_},null,544),[[J,m.value]]),f[3]||(f[3]=t("span",{class:"absolute right-0 top-0 h-full px-3 flex items-center text-[#669ee9] border-l border-gray-200"},[t("i",{class:"bi bi-search"})],-1))])]),t("div",{class:"flex items-center justify-between gap-3.5"},[t("button",{type:"button",class:"flex items-center justify-center w-[159px] h-10 text-[#669ee9] bg-white border border-gray-200 rounded hover:bg-[#669ee9] hover:text-white transition-colors duration-150",onClick:e},f[4]||(f[4]=[t("i",{class:"bi bi-plus-lg"},null,-1),t("span",{class:"ml-2.5"},"Add New",-1)])),t("button",{onClick:w,type:"button",class:"flex items-center justify-center w-[47px] h-10 text-[#669ee9] bg-white border border-gray-200 rounded hover:bg-[#669ee9] hover:text-white transition-colors duration-150"},f[5]||(f[5]=[t("i",{class:"bi bi-arrow-repeat"},null,-1)]))])]),a(R,{configs:s.value,filters:l.value,"rows-per-page":10,onEdit:o,onDelete:x},null,8,["configs","filters"]),a(M,{modelValue:g.value,"onUpdate:modelValue":f[1]||(f[1]=E=>g.value=E),size:"3xl",title:n.value?"Update User  ":"Create User",onClose:i},{default:y(()=>[n.value?(O(),A(D(te),{key:0,user:n.value,onSubmit:r},null,8,["user"])):(O(),A(D(ee),{key:1,onSubmit:r}))]),_:1},8,["modelValue","title"])]),_:1}),a(P,{modelValue:d.value,"onUpdate:modelValue":f[2]||(f[2]=E=>d.value=E),onAccept:C,onDeny:u},null,8,["modelValue"]),a(Q,{open:b.value},null,8,["open"])],64)}}};export{ie as default};

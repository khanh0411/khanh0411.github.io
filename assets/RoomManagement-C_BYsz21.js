import{_ as G,r,j as g,o as w,c as S,a as e,k as u,l as R,b as D,D as V,W as N,F as I,E as y,e as O,d as Z,x as $,C as q,z as ee,q as te,ce as oe,s as T,u as A}from"./index-DYsdoSjd.js";import{u as U}from"./room.store-D7VuLldK.js";class M{constructor(v,m,p,n){this.mapped_id=v,this.id=m,this.name=p||"",this.capacity=n||""}}const le={__name:"CreateRoomForm",emits:["submit"],setup(k,{emit:v}){const m=v,p=U(),n=r(!1),s={name:"",capacity:""},d={name:"",capacity:""},i=r({...d}),l=r({...s});async function f(){let c=!0;if(l.value={...s},i.value.name.trim()===""&&(l.value.name="This field is required",c=!1),i.value.capacity===0&&(l.value.capacity="This field is required",c=!1),c){n.value=!0;const t=await p.handleCreateRoom(i.value);n.value=!1,t.errors?y({text:t.errors,type:"error"}):(m("submit"),y({text:" Create successfully",type:"success"}),i.value={...d})}}return(c,t)=>{const o=g("GenericInput"),x=g("SmallComponent"),h=g("FullScreenLoading");return w(),S(I,null,[e("form",{onSubmit:N(f,["prevent"]),class:"space-y-4"},[e("div",null,[t[2]||(t[2]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name Room",-1)),u(o,{id:"name",modelValue:i.value.name,"onUpdate:modelValue":t[0]||(t[0]=_=>i.value.name=_),type:"text",placeholder:"Enter name room",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 invalid:border-red-500",error:!!l.value.name},null,8,["modelValue","error"]),u(x,null,{default:R(()=>[D(V(l.value.name),1)]),_:1})]),e("div",null,[t[3]||(t[3]=e("label",{for:"capacity",class:"block text-sm font-medium text-gray-700"},"Capacity Room",-1)),u(o,{id:"capacity",modelValue:i.value.capacity,"onUpdate:modelValue":t[1]||(t[1]=_=>i.value.capacity=_),type:"text",placeholder:"Enter capacity room",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",error:!!l.value.capacity},null,8,["modelValue","error"]),u(x,null,{default:R(()=>[D(V(l.value.capacity),1)]),_:1})]),t[4]||(t[4]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"btn btn-blue"},"Save")],-1))],32),u(h,{open:n.value},null,8,["open"])],64)}}},ae=G(le,[["__scopeId","data-v-8edbd81b"]]),ne={__name:"EditRoomForm",props:{room:{type:M,required:!0}},emits:["submit"],setup(k,{emit:v}){const m=v,p=k,n=U(),s=r(!1),d={name:"",capacity:""},i={name:"",capacity:""},l=r({...i}),f=r({...d});async function c(){let t=!0;if(f.value={...d},l.value.name.trim()===""&&(f.value.name="This field is required",t=!1),l.value.capacity===0&&(f.value.capacity="This field is required",t=!1),t){s.value=!0;const o=await n.handleUpdateRoom(p.room.id,l.value);s.value=!1,o.errors?y({text:o.errors,type:"error"}):(m("submit"),y({text:" Create successfully",type:"success"}),l.value={...i})}}return O(()=>{l.value={...i,...p.room}}),(t,o)=>{const x=g("GenericInput"),h=g("SmallComponent"),_=g("FullScreenLoading");return w(),S(I,null,[e("form",{onSubmit:N(c,["prevent"]),class:"space-y-4"},[e("div",null,[o[2]||(o[2]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name Room",-1)),u(x,{id:"name",modelValue:l.value.name,"onUpdate:modelValue":o[0]||(o[0]=F=>l.value.name=F),type:"text",placeholder:"Enter name room",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 invalid:border-red-500",error:!!f.value.name},null,8,["modelValue","error"]),u(h,null,{default:R(()=>[D(V(f.value.name),1)]),_:1})]),e("div",null,[o[3]||(o[3]=e("label",{for:"capacity",class:"block text-sm font-medium text-gray-700"},"Capacity Room",-1)),u(x,{id:"capacity",modelValue:l.value.capacity,"onUpdate:modelValue":o[1]||(o[1]=F=>l.value.capacity=F),type:"text",placeholder:"Enter capacity room",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",error:!!f.value.capacity},null,8,["modelValue","error"]),u(h,null,{default:R(()=>[D(V(f.value.capacity),1)]),_:1})]),o[4]||(o[4]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"btn btn-blue"},"Save")],-1))],32),u(_,{open:s.value},null,8,["open"])],64)}}},se=G(ne,[["__scopeId","data-v-af9ab6da"]]),re={class:"mx-auto py-4"},ie={class:"flex justify-between items-center mb-4"},ue={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center"},de={class:"bg-white p-6 rounded-lg shadow-lg w-96"},ce={class:"mb-4"},me={class:"flex justify-end gap-2"},pe={class:"table-auto w-full border border-gray-200 shadow-sm"},fe={class:"border px-4 py-2"},be={class:"border px-4 py-2"},ye={class:"border px-4 py-2"},ve={class:"border px-4 py-2 text-center"},ge=["onClick"],xe={__name:"ViewUserRoom",props:{listuser:{type:Array},roomId:{type:String}},emits:["change"],setup(k,{emit:v}){const m=U(),p=r([]),n=r(""),s=r(!1),d=k,i=v;Z(()=>{p.value=d.listuser});async function l(){if(n.value){const c={room_id:d.roomId,email:n.value},t=await m.handleAddStudentToRoom(c);t.errors?y({text:t.errors,type:"error"}):(i("change"),y({text:"Đã thêm học viên mới vào room",type:"success"}),n.value="",s.value=!1)}}async function f(c){const t=await m.handleDeleteStudentFromRoom(c.email);t.errors?y({text:t.errors,type:"error"}):(y({text:"Đã xóa học viên khỏi vào room",type:"success"}),i("change"))}return(c,t)=>(w(),S("div",re,[e("div",ie,[t[4]||(t[4]=e("h1",{class:"text-2xl font-bold"},"User List",-1)),e("button",{onClick:t[0]||(t[0]=o=>s.value=!0),class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[3]||(t[3]=[e("i",{class:"bi bi-person-plus"},null,-1),D(" Add Student ")]))]),s.value?(w(),S("div",ue,[e("div",de,[t[7]||(t[7]=e("h2",{class:"text-xl font-bold mb-4"},"Add Student to Room",-1)),e("div",ce,[t[5]||(t[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Student Email",-1)),$(e("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=o=>n.value=o),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter student email"},null,512),[[q,n.value]])]),e("div",me,[e("button",{onClick:t[2]||(t[2]=o=>s.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"},"Cancel"),e("button",{onClick:l,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"},t[6]||(t[6]=[e("i",{class:"bi bi-plus-circle"},null,-1),D(" Add ")]))])])])):ee("",!0),e("table",pe,[t[9]||(t[9]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2 text-left"},"ID"),e("th",{class:"px-4 py-2 text-left"},"Full Name"),e("th",{class:"px-4 py-2 text-left"},"Email"),e("th",{class:"px-4 py-2 text-center"},"Actions")])],-1)),e("tbody",null,[(w(!0),S(I,null,te(p.value,(o,x)=>(w(),S("tr",{key:o._id,class:"odd:bg-white even:bg-gray-50 hover:bg-gray-100"},[e("td",fe,V(x+1),1),e("td",be,V(o.full_name),1),e("td",ye,V(o.email),1),e("td",ve,[e("button",{onClick:h=>f(o),class:"text-red-500 hover:text-red-700 ml-2"},t[8]||(t[8]=[e("i",{class:"bi bi-trash"},null,-1)]),8,ge)])]))),128))])])]))}},he={class:"flex items-center justify-between flex-wrap gap-3.5 mb-3 mx-5"},we={class:"flex items-center justify-between flex-wrap gap-3.5"},_e={class:"relative w-[250px]"},Re={__name:"RoomManagement",setup(k){const v=U(),m=r(!1),p=r(!1),n=r(!1),s=r(!1),d=r(null),i=r([]),l=r(""),f=r(""),c=r({searchQuery:l.value}),t=r(new oe({cols:[{title:"ID",key:"mapped_id",i18n:"",width:"10%",sortable:!0},{title:"Name",key:"name",i18n:"",width:"30%",sortable:!0},{title:"Capacity",key:"capacity",i18n:"",width:"60%",sortable:!1}],rows:[],uniqueField:"mapped_id",isShowActionIconOnly:!0,showMoreButton:!0,editButton:!0,deleteButton:!0,height:800,pagination:{page:1,totals:5}}));async function o(){s.value=!0;const b=await v.handleGetAllRoom();s.value=!1,b.errors?y({text:b.errors,type:"error"}):t.value.rows=b.data.map((a,E)=>new M(E+1,a._id,a.name,a.capacity))}function x(){c.value.searchQuery=l.value}function h(){l.value="",c.value.searchQuery="",o()}function _(){h(),m.value=!1}function F(){m.value=!0}function z(b){m.value=!0,d.value=b}function L(){n.value=!1,d.value=null}function Q(b){n.value=!0,d.value=b}function B(){p.value=!1}function W(){B()}async function H(){s.value=!0;const b=await v.handleDeleteRoom(d.value.id);s.value=!1,b.errors?y({text:b.errors,type:"error"}):(y({text:"Delete successfully",type:"success"}),n.value=!1,h())}async function J(b){p.value=!0,s.value=!0;const a=await v.handleGetRoomManager(b.id);s.value=!1,a.errors?y({text:a.errors,type:"error"}):(i.value=a.data.ListStudent,f.value=b.id)}function K(){L()}return O(async()=>{o()}),(b,a)=>{const E=g("GenericTable"),j=g("GenericDialog"),P=g("AdminLayout"),X=g("ConfirmDialog"),Y=g("FullScreenLoading");return w(),S(I,null,[u(P,null,{default:R(()=>[e("form",he,[e("div",we,[e("div",_e,[$(e("input",{"onUpdate:modelValue":a[0]||(a[0]=C=>l.value=C),type:"text",class:"w-full h-10 pl-4 pr-12 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-[#669ee9] focus:border-[#669ee9]",placeholder:"Search",onInput:x},null,544),[[q,l.value]]),a[4]||(a[4]=e("span",{class:"absolute right-0 top-0 h-full px-3 flex items-center text-[#669ee9] border-l border-gray-200"},[e("i",{class:"bi bi-search"})],-1))])]),e("div",{class:"flex items-center justify-between gap-3.5"},[e("button",{type:"button",class:"flex items-center justify-center w-[159px] h-10 text-[#669ee9] bg-white border border-gray-200 rounded hover:bg-[#669ee9] hover:text-white transition-colors duration-150",onClick:F},a[5]||(a[5]=[e("i",{class:"bi bi-plus-lg"},null,-1),e("span",{class:"ml-2.5"},"Add New",-1)])),e("button",{onClick:h,type:"button",class:"flex items-center justify-center w-[47px] h-10 text-[#669ee9] bg-white border border-gray-200 rounded hover:bg-[#669ee9] hover:text-white transition-colors duration-150"},a[6]||(a[6]=[e("i",{class:"bi bi-arrow-repeat"},null,-1)]))])]),u(E,{configs:t.value,filters:c.value,"rows-per-page":10,onShow:J,onEdit:z,onDelete:Q},null,8,["configs","filters"]),u(j,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=C=>m.value=C),size:"3xl",title:d.value?"Update Category  ":"Create Category",onClose:L},{default:R(()=>[d.value?(w(),T(A(se),{key:0,room:d.value,onSubmit:_},null,8,["room"])):(w(),T(A(ae),{key:1,onSubmit:_}))]),_:1},8,["modelValue","title"]),u(j,{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=C=>p.value=C),size:"5xl",title:"List User In Room",onClose:B},{default:R(()=>[u(A(xe),{listuser:i.value,roomId:f.value,onChange:W},null,8,["listuser","roomId"])]),_:1},8,["modelValue"])]),_:1}),u(X,{modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=C=>n.value=C),onAccept:H,onDeny:K},null,8,["modelValue"]),u(Y,{open:s.value},null,8,["open"])],64)}}};export{Re as default};
